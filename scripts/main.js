"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var l=t[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,r,l){return r&&e(t.prototype,r),l&&e(t,l),t}}(),XmlEditor=function(){function e(){_classCallCheck(this,e),this.xmlFile=null,this.xsltFile=null,self=this,$("input[type=file]").on("change",function(e){var t=e.target.files[0],r=$(e.target).parents();console.log("input change",e.target,r),self.loadFile(t,r.filter(".editor").find("juicy-ace-editor")),"xml"==r.filter(".editor").attr("id")?self.xmlFile=t:self.xsltFile=t}),$("#compile").on("click",function(e){var t=new XSLTProcessor;t.importStylesheet(self.xslt);var r=t.transformToDocument(self.xml,document),l=new XMLSerializer;$("#output juicy-ace-editor")[0].editor.setValue(vkbeautify.xml(l.serializeToString(r)),-1)}),$("juicy-ace-editor").each(function(e,t){t.editor.on("input",function(){var r=$(t).parents(),l=r.filter(".editor").find(".download")[0],n=encodeURIComponent(t.editor.getValue());l.setAttribute("href","data:text/plain;charset=utf-8,"+n);var i;i=0==e?self.xmlFile.name:1==e?self.xsltFile.name:"output.html",l.setAttribute("download",i)})})}return _createClass(e,[{key:"xml",get:function(){var e=new DOMParser,t=$("#xml juicy-ace-editor")[0];return e.parseFromString(t.editor.getValue(),"text/xml")}},{key:"xslt",get:function(){var e=new DOMParser,t=$("#xslt juicy-ace-editor")[0];return e.parseFromString(t.editor.getValue(),"text/xml")}}]),_createClass(e,[{key:"loadFile",value:function(e,t){var r=new FileReader;r.onload=function(e){console.log(t),t[0].editor.setValue(vkbeautify.xml(e.target.result),-1)},r.readAsText(e)}}]),e}();$(function(){new XmlEditor});